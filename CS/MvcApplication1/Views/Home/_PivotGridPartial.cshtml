@using MvcApplication1.Helper


@Html.DevExpress().PivotGrid(settings =>
{
    settings.Name = "pivotGrid";
    settings.CallbackRouteValues = new { Controller = "Home", Action = "PivotGridPartial" };
    settings.OptionsData.DataProcessingEngine = PivotDataProcessingEngine.Optimized;
    settings.Fields.AddDataSourceColumn("Row", PivotArea.RowArea);
    settings.Fields.AddDataSourceColumn("Column", PivotArea.ColumnArea);
    settings.Fields.AddDataSourceColumn("Data", PivotArea.DataArea);
    settings.ClientSideEvents.PopupMenuItemClick = "MenuItemClick";

    PivotEventHelper.CustomizeContextMenu(settings);
    PivotEventHelper.PassAllowedFieldsToClientSide(settings);
    if (ViewData["fieldID"] != null && ViewData["fieldValueIndex"] != null) {
        PivotEventHelper.HandleAfterPerformCallback(settings, (string)ViewData["fieldID"], Convert.ToInt32(ViewData["fieldValueIndex"]));
        ViewData.Remove("fieldID");
        ViewData.Remove("fieldValueIndex");
    }

}).Bind(Model).GetHtml()